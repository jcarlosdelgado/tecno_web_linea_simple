import{m as S,a as c,b as n,u as r,h as j,w as m,d as e,n as B,j as N,v as M,i as R,o as p,F as u,f as b,t as a,e as x,p as D}from"./app-BlCBzDlk.js";import{_ as E}from"./AuthenticatedLayout-DQ_849qa.js";import{_ as h}from"./Card-O9o5eUXT.js";import{_ as v}from"./Button-CX2Fugjk.js";import{_ as y,a as F}from"./TextInput-CMlWIgSe.js";import{_ as g}from"./InputError-DW4bn3YL.js";import"./Footer-o2Y0PLgd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BzKXVlKb.js";const L={class:"py-12"},q={class:"max-w-4xl mx-auto sm:px-6 lg:px-8 space-y-6"},z={class:"p-6"},I={class:"space-y-4"},O={class:"p-6"},T={class:"space-y-6"},U={class:"bg-gray-50 px-4 py-3 flex items-center justify-between border-b border-gray-200"},P={class:"flex items-center"},A=["id","checked","onChange"],G=["for"],H={class:"text-sm text-gray-500"},J={class:"p-4 bg-white"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Q=["id","value","checked","onChange"],W=["for"],X={class:"font-medium text-gray-900"},Y={class:"text-gray-500 text-xs"},Z={key:0,class:"mt-6 p-4 bg-indigo-50 rounded-lg"},ee={class:"text-sm font-medium text-indigo-900"},se={class:"flex justify-end gap-3 mt-6"},pe={__name:"Create",props:{permisos:Object},setup(f){const _=f,o=S({nombre:"",descripcion:"",permisos:[]}),k=d=>{const s=o.permisos.indexOf(d);s>-1?o.permisos.splice(s,1):o.permisos.push(d)},w=d=>{const s=_.permisos[d].map(t=>t.id_permiso);s.every(t=>o.permisos.includes(t))?o.permisos=o.permisos.filter(t=>!s.includes(t)):s.forEach(t=>{o.permisos.includes(t)||o.permisos.push(t)})},C=d=>_.permisos[d].map(i=>i.id_permiso).every(i=>o.permisos.includes(i)),$=()=>{o.post(route("roles.store"),{preserveScroll:!0})},V=()=>{D.visit(route("roles.index"))};return(d,s)=>(p(),c(u,null,[n(r(j),{title:"Crear Rol"}),n(E,null,{header:m(()=>[...s[2]||(s[2]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Crear Nuevo Rol ",-1)])]),default:m(()=>[e("div",L,[e("div",q,[e("form",{onSubmit:B($,["prevent"])},[n(h,{class:"mb-6"},{default:m(()=>[e("div",z,[s[4]||(s[4]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Información Básica",-1)),e("div",I,[e("div",null,[n(y,{for:"nombre",value:"Nombre del Rol *"}),n(F,{id:"nombre",modelValue:r(o).nombre,"onUpdate:modelValue":s[0]||(s[0]=i=>r(o).nombre=i),type:"text",class:"mt-1 block w-full",placeholder:"Ej: Diseñador, Instalador, Contador",required:""},null,8,["modelValue"]),n(g,{class:"mt-2",message:r(o).errors.nombre},null,8,["message"]),s[3]||(s[3]=e("p",{class:"mt-1 text-sm text-gray-500"}," El nombre debe ser descriptivo y único ",-1))]),e("div",null,[n(y,{for:"descripcion",value:"Descripción"}),N(e("textarea",{id:"descripcion","onUpdate:modelValue":s[1]||(s[1]=i=>r(o).descripcion=i),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3",placeholder:"Breve descripción de las responsabilidades de este rol"},null,512),[[M,r(o).descripcion]]),n(g,{class:"mt-2",message:r(o).errors.descripcion},null,8,["message"])])])])]),_:1}),n(h,null,{default:m(()=>[e("div",O,[s[5]||(s[5]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Permisos del Rol",-1)),s[6]||(s[6]=e("p",{class:"text-sm text-gray-600 mb-6"}," Selecciona los permisos que tendrá este rol. Los usuarios con este rol podrán realizar únicamente las acciones seleccionadas. ",-1)),e("div",T,[(p(!0),c(u,null,b(f.permisos,(i,t)=>(p(),c("div",{key:t,class:"border border-gray-200 rounded-lg overflow-hidden"},[e("div",U,[e("div",P,[e("input",{id:`modulo-${t}`,type:"checkbox",checked:C(t),onChange:l=>w(t),class:"h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,40,A),e("label",{for:`modulo-${t}`,class:"ml-3 font-semibold text-gray-900 capitalize cursor-pointer"},a(t),9,G)]),e("span",H,a(i.length)+" "+a(i.length===1?"permiso":"permisos"),1)]),e("div",J,[e("div",K,[(p(!0),c(u,null,b(i,l=>(p(),c("div",{key:l.id_permiso,class:"flex items-start"},[e("input",{id:`permiso-${l.id_permiso}`,type:"checkbox",value:l.id_permiso,checked:r(o).permisos.includes(l.id_permiso),onChange:oe=>k(l.id_permiso),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded mt-0.5"},null,40,Q),e("label",{for:`permiso-${l.id_permiso}`,class:"ml-3 text-sm cursor-pointer"},[e("span",X,a(l.nombre.replace(/_/g," ")),1),e("p",Y,a(l.descripcion),1)],8,W)]))),128))])])]))),128))]),n(g,{class:"mt-2",message:r(o).errors.permisos},null,8,["message"]),r(o).permisos.length>0?(p(),c("div",Z,[e("p",ee," ✓ "+a(r(o).permisos.length)+" "+a(r(o).permisos.length===1?"permiso seleccionado":"permisos seleccionados"),1)])):R("",!0)])]),_:1}),e("div",se,[n(v,{type:"button",variant:"secondary",onClick:V},{default:m(()=>[...s[7]||(s[7]=[x(" Cancelar ",-1)])]),_:1}),n(v,{type:"submit",variant:"primary",disabled:r(o).processing},{default:m(()=>[s[8]||(s[8]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),x(" "+a(r(o).processing?"Creando...":"Crear Rol"),1)]),_:1},8,["disabled"])])],32)])])]),_:1})],64))}};export{pe as default};
