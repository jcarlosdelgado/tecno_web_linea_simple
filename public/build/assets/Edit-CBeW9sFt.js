import{m as M,a as m,b as n,u as i,h as S,w as p,d as e,n as B,j as _,v as E,s as N,i as R,o as u,F as f,f as b,t as d,e as x,p as A}from"./app-BlCBzDlk.js";import{_ as D}from"./AuthenticatedLayout-DQ_849qa.js";import{_ as h}from"./Card-O9o5eUXT.js";import{_ as v}from"./Button-CX2Fugjk.js";import{_ as y,a as F}from"./TextInput-CMlWIgSe.js";import{_ as k}from"./InputError-DW4bn3YL.js";import"./Footer-o2Y0PLgd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BzKXVlKb.js";const O={class:"font-semibold text-xl text-gray-800 leading-tight"},U={class:"py-12"},G={class:"max-w-4xl mx-auto sm:px-6 lg:px-8 space-y-6"},L={class:"p-6"},T={class:"space-y-4"},q={class:"flex items-center"},z={class:"p-6"},I={class:"space-y-6"},P={class:"bg-gray-50 px-4 py-3 flex items-center justify-between border-b border-gray-200"},H={class:"flex items-center"},J=["id","checked","onChange"],K=["for"],Q={class:"text-sm text-gray-500"},W={class:"p-4 bg-white"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Y=["id","value","checked","onChange"],Z=["for"],ee={class:"font-medium text-gray-900"},se={class:"text-gray-500 text-xs"},oe={key:0,class:"mt-6 p-4 bg-indigo-50 rounded-lg"},te={class:"text-sm font-medium text-indigo-900"},ie={class:"flex justify-end gap-3 mt-6"},fe={__name:"Edit",props:{role:Object,permisos:Object,permisosAsignados:Array},setup(g){const a=g,s=M({nombre:a.role.nombre,descripcion:a.role.descripcion||"",activo:a.role.activo,permisos:[...a.permisosAsignados]}),w=c=>{const o=s.permisos.indexOf(c);o>-1?s.permisos.splice(o,1):s.permisos.push(c)},$=c=>{const o=a.permisos[c].map(t=>t.id_permiso);o.every(t=>s.permisos.includes(t))?s.permisos=s.permisos.filter(t=>!o.includes(t)):o.forEach(t=>{s.permisos.includes(t)||s.permisos.push(t)})},C=c=>a.permisos[c].map(r=>r.id_permiso).every(r=>s.permisos.includes(r)),V=()=>{s.put(route("roles.update",a.role.id_rol),{preserveScroll:!0})},j=()=>{A.visit(route("roles.index"))};return(c,o)=>(u(),m(f,null,[n(i(S),{title:`Editar Rol: ${g.role.nombre}`},null,8,["title"]),n(D,null,{header:p(()=>[e("h2",O," Editar Rol: "+d(g.role.nombre),1)]),default:p(()=>[e("div",U,[e("div",G,[e("form",{onSubmit:B(V,["prevent"])},[n(h,{class:"mb-6"},{default:p(()=>[e("div",L,[o[4]||(o[4]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Información Básica",-1)),e("div",T,[e("div",null,[n(y,{for:"nombre",value:"Nombre del Rol *"}),n(F,{id:"nombre",modelValue:i(s).nombre,"onUpdate:modelValue":o[0]||(o[0]=r=>i(s).nombre=r),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),n(k,{class:"mt-2",message:i(s).errors.nombre},null,8,["message"])]),e("div",null,[n(y,{for:"descripcion",value:"Descripción"}),_(e("textarea",{id:"descripcion","onUpdate:modelValue":o[1]||(o[1]=r=>i(s).descripcion=r),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:"3"},null,512),[[E,i(s).descripcion]]),n(k,{class:"mt-2",message:i(s).errors.descripcion},null,8,["message"])]),e("div",q,[_(e("input",{id:"activo","onUpdate:modelValue":o[2]||(o[2]=r=>i(s).activo=r),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[N,i(s).activo]]),o[3]||(o[3]=e("label",{for:"activo",class:"ml-2 block text-sm text-gray-900"}," Rol activo ",-1))])])])]),_:1}),n(h,null,{default:p(()=>[e("div",z,[o[5]||(o[5]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Permisos del Rol",-1)),e("div",I,[(u(!0),m(f,null,b(g.permisos,(r,t)=>(u(),m("div",{key:t,class:"border border-gray-200 rounded-lg overflow-hidden"},[e("div",P,[e("div",H,[e("input",{id:`modulo-${t}`,type:"checkbox",checked:C(t),onChange:l=>$(t),class:"h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,40,J),e("label",{for:`modulo-${t}`,class:"ml-3 font-semibold text-gray-900 capitalize cursor-pointer"},d(t),9,K)]),e("span",Q,d(r.length)+" "+d(r.length===1?"permiso":"permisos"),1)]),e("div",W,[e("div",X,[(u(!0),m(f,null,b(r,l=>(u(),m("div",{key:l.id_permiso,class:"flex items-start"},[e("input",{id:`permiso-${l.id_permiso}`,type:"checkbox",value:l.id_permiso,checked:i(s).permisos.includes(l.id_permiso),onChange:re=>w(l.id_permiso),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded mt-0.5"},null,40,Y),e("label",{for:`permiso-${l.id_permiso}`,class:"ml-3 text-sm cursor-pointer"},[e("span",ee,d(l.nombre.replace(/_/g," ")),1),e("p",se,d(l.descripcion),1)],8,Z)]))),128))])])]))),128))]),i(s).permisos.length>0?(u(),m("div",oe,[e("p",te," ✓ "+d(i(s).permisos.length)+" "+d(i(s).permisos.length===1?"permiso seleccionado":"permisos seleccionados"),1)])):R("",!0)])]),_:1}),e("div",ie,[n(v,{type:"button",variant:"secondary",onClick:j},{default:p(()=>[...o[6]||(o[6]=[x(" Cancelar ",-1)])]),_:1}),n(v,{type:"submit",variant:"primary",disabled:i(s).processing},{default:p(()=>[o[7]||(o[7]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),x(" "+d(i(s).processing?"Guardando...":"Guardar Cambios"),1)]),_:1},8,["disabled"])])],32)])])]),_:1})],64))}};export{fe as default};
