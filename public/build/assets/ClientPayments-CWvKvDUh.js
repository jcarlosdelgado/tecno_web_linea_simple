import{r as N,c as j,a as u,b as l,u as B,h as F,w as r,d as t,g as v,i as m,t as a,o as d,q as f,F as h,f as A,e as g,n as $,p as _}from"./app-BlCBzDlk.js";import{_ as I}from"./AuthenticatedLayout-DQ_849qa.js";import{_ as x}from"./Card-O9o5eUXT.js";import{_ as p}from"./Button-CX2Fugjk.js";import{_ as y}from"./Badge-DUws-gGn.js";import"./Footer-o2Y0PLgd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BzKXVlKb.js";const L={class:"flex items-center justify-between"},z={class:"font-semibold text-xl text-gray-800 leading-tight"},G={class:"py-12"},R={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},S={class:"flex items-center gap-4"},H={class:"flex-shrink-0"},q={class:"h-16 w-16 rounded-full bg-indigo-100 flex items-center justify-center"},U={class:"text-2xl font-semibold text-indigo-600"},J={class:"flex-1"},K={class:"text-lg font-medium text-gray-900"},Q={class:"text-sm text-gray-500"},W={key:0,class:"text-sm text-gray-500"},X={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},Y={class:"text-center"},Z={class:"text-3xl font-bold text-gray-900"},tt={class:"text-center"},et={class:"text-3xl font-bold text-gray-900"},st={class:"text-center"},ot={class:"text-3xl font-bold text-green-600"},at={class:"text-center"},nt={class:"text-3xl font-bold text-orange-600"},rt={class:"flex gap-2"},it={class:"space-y-4"},lt={class:"flex flex-col md:flex-row md:items-start md:justify-between gap-4"},dt={class:"flex-1"},ct={class:"flex items-center gap-2 mb-2"},ut={class:"text-lg font-semibold text-gray-900"},mt={class:"space-y-2 text-sm text-gray-600"},gt={class:"flex items-center gap-2"},xt={class:"font-medium"},vt={class:"flex items-center gap-2"},ft={key:0,class:"mt-4 pt-4 border-t border-gray-200"},_t={class:"text-sm font-medium text-gray-700 mb-2"},pt={class:"grid grid-cols-2 md:grid-cols-4 gap-2"},ht={class:"font-medium"},yt={class:"text-gray-600"},bt=["onClick"],kt={key:0,class:"text-xs text-gray-500 mt-2"},Ct={class:"flex flex-col gap-2 min-w-[200px]"},Nt={__name:"ClientPayments",props:{cliente:Object,pagos:Array,stats:Object},setup(i){const b=i,c=N("TODOS"),k=j(()=>c.value==="TODOS"?b.pagos:b.pagos.filter(s=>s.tipo_pago===c.value)),C=s=>({PENDIENTE:"warning",COMPLETADO:"success",PARCIAL:"info",PAGADA:"success"})[s]||"default",D=s=>s?new Date(s).toLocaleDateString("es-BO",{year:"numeric",month:"short",day:"numeric"}):"-",w=s=>s.tipo_pago==="CONTADO"?s.pasarela?.estado||"PENDIENTE":s.cuotas.every(n=>n.estado==="PAGADA")?"COMPLETADO":s.cuotas.some(n=>n.estado==="PAGADA")?"PARCIAL":"PENDIENTE",O=s=>{s.tipo_pago==="CREDITO"?_.visit(route("admin.cuotas.index",s.id_pago)):_.visit(route("admin.pagos.checkout",s.id_pago))},P=s=>{_.visit(route("admin.trabajos.show",s))},T=s=>s.tipo_pago==="CONTADO"?s.pasarela?.estado==="COMPLETADO":s.cuotas.some(e=>e.estado==="PAGADA"),E=s=>{window.open(route("admin.pagos.descargar-comprobante",s.id_pago),"_blank")},M=s=>{window.open(route("admin.cuotas.descargar-comprobante",s),"_blank")},V=()=>{_.visit(route("admin.pagos.index"))};return(s,e)=>(d(),u(h,null,[l(B(F),{title:`Pagos de ${i.cliente.nombre}`},null,8,["title"]),l(I,null,{header:r(()=>[t("div",L,[t("h2",z," Pagos de "+a(i.cliente.nombre),1),l(p,{variant:"secondary",onClick:V},{default:r(()=>[...e[3]||(e[3]=[g(" Volver a Lista ",-1)])]),_:1})])]),default:r(()=>[t("div",G,[t("div",R,[l(x,null,{default:r(()=>[t("div",S,[t("div",H,[t("div",q,[t("span",U,a(i.cliente.nombre.charAt(0).toUpperCase()),1)])]),t("div",J,[t("h3",K,a(i.cliente.nombre),1),t("p",Q,a(i.cliente.email),1),i.cliente.telefono?(d(),u("p",W,a(i.cliente.telefono),1)):m("",!0)])])]),_:1}),t("div",X,[l(x,null,{default:r(()=>[t("div",Y,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-500 mb-1"},"Total Pagos",-1)),t("p",Z,a(i.stats.total_pagos),1)])]),_:1}),l(x,null,{default:r(()=>[t("div",tt,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-500 mb-1"},"Monto Total",-1)),t("p",et,"Bs "+a(parseFloat(i.stats.monto_total).toFixed(2)),1)])]),_:1}),l(x,null,{default:r(()=>[t("div",st,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500 mb-1"},"Pagado",-1)),t("p",ot,"Bs "+a(parseFloat(i.stats.monto_pagado).toFixed(2)),1)])]),_:1}),l(x,null,{default:r(()=>[t("div",at,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 mb-1"},"Pendiente",-1)),t("p",nt,"Bs "+a(parseFloat(i.stats.monto_pendiente).toFixed(2)),1)])]),_:1})]),t("div",rt,[t("button",{onClick:e[0]||(e[0]=o=>c.value="TODOS"),class:f(["px-4 py-2 text-sm rounded-lg transition-colors",c.value==="TODOS"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Todos ("+a(i.stats.total_pagos)+") ",3),t("button",{onClick:e[1]||(e[1]=o=>c.value="CONTADO"),class:f(["px-4 py-2 text-sm rounded-lg transition-colors",c.value==="CONTADO"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Contado ("+a(i.stats.pagos_contado)+") ",3),t("button",{onClick:e[2]||(e[2]=o=>c.value="CREDITO"),class:f(["px-4 py-2 text-sm rounded-lg transition-colors",c.value==="CREDITO"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Crédito ("+a(i.stats.pagos_credito)+") ",3)]),t("div",it,[(d(!0),u(h,null,A(k.value,o=>(d(),v(x,{key:o.id_pago},{default:r(()=>[t("div",lt,[t("div",dt,[t("div",ct,[t("h3",ut,a(o.trabajo.titulo),1),l(y,{variant:o.tipo_pago==="CONTADO"?"default":"info"},{default:r(()=>[g(a(o.tipo_pago),1)]),_:2},1032,["variant"]),l(y,{variant:C(w(o))},{default:r(()=>[g(a(w(o)),1)]),_:2},1032,["variant"])]),t("div",mt,[t("div",gt,[e[8]||(e[8]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",xt,"Bs "+a(parseFloat(o.monto).toFixed(2)),1)]),t("div",vt,[e[9]||(e[9]=t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),t("span",null,a(D(o.fecha)),1)])]),o.tipo_pago==="CREDITO"?(d(),u("div",ft,[t("p",_t," Cuotas: "+a(o.cuotas.filter(n=>n.estado==="PAGADA").length)+"/"+a(o.numero_cuotas)+" pagadas ",1),t("div",pt,[(d(!0),u(h,null,A(o.cuotas.slice(0,4),n=>(d(),u("div",{key:n.id_cuota,class:f(["p-2 rounded-lg border text-xs relative",n.estado==="PAGADA"?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"])},[t("div",ht,"Cuota "+a(n.numero_cuota),1),t("div",yt,"Bs "+a(parseFloat(n.monto).toFixed(2)),1),l(y,{variant:C(n.estado),class:"mt-1"},{default:r(()=>[g(a(n.estado),1)]),_:2},1032,["variant"]),n.estado==="PAGADA"?(d(),u("button",{key:0,onClick:$(wt=>M(n.id_cuota),["stop"]),class:"mt-1 w-full text-xs bg-green-600 hover:bg-green-700 text-white py-1 px-2 rounded transition-colors",title:"Descargar comprobante"}," PDF ",8,bt)):m("",!0)],2))),128))]),o.cuotas.length>4?(d(),u("p",kt," +"+a(o.cuotas.length-4)+" cuotas más ",1)):m("",!0)])):m("",!0)]),t("div",Ct,[o.tipo_pago==="CREDITO"?(d(),v(p,{key:0,variant:"primary",size:"sm",onClick:n=>O(o)},{default:r(()=>[...e[10]||(e[10]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),g(" Ver Plan de Cuotas ",-1)])]),_:1},8,["onClick"])):m("",!0),T(o)&&o.tipo_pago==="CONTADO"?(d(),v(p,{key:1,variant:"success",size:"sm",onClick:n=>E(o)},{default:r(()=>[...e[11]||(e[11]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),g(" Descargar Comprobante ",-1)])]),_:1},8,["onClick"])):m("",!0),l(p,{variant:"secondary",size:"sm",onClick:n=>P(o.id_trabajo)},{default:r(()=>[...e[12]||(e[12]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),g(" Ver Trabajo ",-1)])]),_:1},8,["onClick"])])])]),_:2},1024))),128))]),k.value.length===0?(d(),v(x,{key:0},{default:r(()=>[...e[13]||(e[13]=[t("div",{class:"text-center py-12"},[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No hay pagos"),t("p",{class:"mt-1 text-sm text-gray-500"}," Este cliente no tiene pagos registrados. ")],-1)])]),_:1})):m("",!0)])])]),_:1})],64))}};export{Nt as default};
