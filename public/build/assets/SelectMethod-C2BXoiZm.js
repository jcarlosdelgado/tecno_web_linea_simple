import{J as h,r as x,c as O,m as w,a as l,b as g,u as P,h as T,w as u,d as t,i as c,t as a,q as b,o as n,e as k,F as v,f as j,M as D,p as N}from"./app-BlCBzDlk.js";import{_ as A}from"./AuthenticatedLayout-DQ_849qa.js";import{_ as I}from"./Card-O9o5eUXT.js";import{_ as F}from"./Button-CX2Fugjk.js";import{_ as R}from"./Badge-DUws-gGn.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Footer-o2Y0PLgd.js";import"./ResponsiveNavLink-BzKXVlKb.js";const B={class:"py-12"},M={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},z={class:"flex justify-between items-center mb-6"},$={class:"text-lg font-medium text-gray-900"},L={class:"text-gray-500"},S={class:"text-right"},V={class:"text-3xl font-bold text-indigo-600"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},Q={class:"flex items-center justify-between mb-4"},q={key:0,class:"text-indigo-600"},J={class:"flex items-center justify-between mb-4"},H={key:0,class:"text-indigo-600"},K={key:0,class:"bg-white border border-gray-200 rounded-lg p-6 mb-8 animate-fade-in-down"},U={class:"mb-6"},W={class:"flex gap-3 flex-wrap"},X=["onClick"],Y={class:"bg-gray-50 rounded-lg p-4"},Z={class:"flex justify-between items-center text-sm mb-2"},tt={class:"font-bold text-gray-900"},et={class:"flex justify-between items-center text-sm"},ot={class:"font-bold text-gray-900"},st={class:"flex justify-end pt-6 border-t border-gray-200"},at={class:"mr-2"},rt={key:0,src:"https://pagofacil.com.bo/images/logo_pagofacil.png",alt:"Pago Fácil",class:"h-6 inline-block bg-white rounded px-1"},it={__name:"SelectMethod",props:{trabajo:Object,total:Number},setup(d){h();const f=d,o=x("CONTADO"),m=x(3),p=x(!1),_=[2,3,6,12],y=O(()=>f.total/m.value),r=w({tipo_pago:"CONTADO",numero_cuotas:1,metodo_pago:"QR_PAGOFACIL"}),C=async()=>{p.value=!0;try{console.log("Initiating payment..."),r.tipo_pago=o.value,r.numero_cuotas=o.value==="CREDITO"?m.value:1,r.metodo_pago="QR_PAGOFACIL";const s=await D.post(route("pagos.initiate",f.trabajo.id_trabajo),{tipo_pago:r.tipo_pago,numero_cuotas:r.numero_cuotas,metodo_pago:r.metodo_pago});s.data.success?(console.log("Payment initiated successfully:",s.data),N.visit(route("pagos.checkout",s.data.pago.id_pago))):alert("Error al iniciar el pago")}catch(s){console.error("Payment error:",s);const e=s.response?.data?.message||s.response?.data?.error||"Error al procesar el pago";alert(e)}finally{p.value=!1}};return(s,e)=>(n(),l(v,null,[g(P(T),{title:"Seleccionar Método de Pago"}),g(A,null,{header:u(()=>[...e[2]||(e[2]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Finalizar Contratación ",-1)])]),default:u(()=>[t("div",B,[t("div",M,[g(I,{title:"Resumen del Pedido"},{default:u(()=>[t("div",z,[t("div",null,[t("h3",$,a(d.trabajo.titulo),1),t("p",L,a(d.trabajo.descripcion),1)]),t("div",S,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-500"},"Total a Pagar",-1)),t("p",V,"Bs "+a(d.total.toFixed(2)),1)])]),t("div",G,[t("div",{class:b(["border-2 rounded-xl p-6 cursor-pointer transition-all hover:shadow-md",o.value==="CONTADO"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-indigo-300"]),onClick:e[0]||(e[0]=i=>o.value="CONTADO")},[t("div",Q,[e[5]||(e[5]=t("h4",{class:"font-bold text-lg text-gray-900"},"Pago al Contado",-1)),o.value==="CONTADO"?(n(),l("div",q,[...e[4]||(e[4]=[t("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):c("",!0)]),e[7]||(e[7]=t("p",{class:"text-gray-600 text-sm mb-4"},"Paga el total ahora y asegura el inicio inmediato de tu trabajo.",-1)),g(R,{variant:"success"},{default:u(()=>[...e[6]||(e[6]=[k("Recomendado",-1)])]),_:1})],2),t("div",{class:b(["border-2 rounded-xl p-6 cursor-pointer transition-all hover:shadow-md",o.value==="CREDITO"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-indigo-300"]),onClick:e[1]||(e[1]=i=>o.value="CREDITO")},[t("div",J,[e[9]||(e[9]=t("h4",{class:"font-bold text-lg text-gray-900"},"Pago a Crédito",-1)),o.value==="CREDITO"?(n(),l("div",H,[...e[8]||(e[8]=[t("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):c("",!0)]),e[10]||(e[10]=t("p",{class:"text-gray-600 text-sm mb-4"},"Paga en cuotas mensuales sin intereses.",-1))],2)]),o.value==="CREDITO"?(n(),l("div",K,[e[15]||(e[15]=t("h4",{class:"font-medium text-gray-900 mb-4"},"Configura tu plan de pagos",-1)),t("div",U,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Número de Cuotas",-1)),t("div",W,[(n(),l(v,null,j(_,i=>t("button",{key:i,type:"button",class:b(["px-4 py-2 rounded-lg border transition-colors",m.value===i?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300 hover:border-indigo-500"]),onClick:lt=>m.value=i},a(i)+" Cuotas ",11,X)),64))])]),t("div",Y,[t("div",Z,[e[12]||(e[12]=t("span",{class:"text-gray-600"},"Monto por cuota:",-1)),t("span",tt,"Bs "+a(y.value.toFixed(2))+" / mes",1)]),t("div",et,[e[13]||(e[13]=t("span",{class:"text-gray-600"},"Total a pagar:",-1)),t("span",ot,"Bs "+a(d.total.toFixed(2)),1)]),e[14]||(e[14]=t("p",{class:"text-xs text-gray-500 mt-2"},"* Sin intereses",-1))])])):c("",!0),t("div",st,[g(F,{onClick:C,variant:"primary",size:"lg",loading:p.value},{default:u(()=>[t("span",at,a(o.value==="CREDITO"?"Crear Plan de Cuotas":"Pagar con"),1),o.value==="CONTADO"?(n(),l("img",rt)):c("",!0)]),_:1},8,["loading"])])]),_:1})])])]),_:1})],64))}},bt=E(it,[["__scopeId","data-v-30c23963"]]);export{bt as default};
