import{m as V,a as u,b as r,u as s,h as F,w as d,d as e,n as B,i as y,j as p,e as i,o as f,F as v,f as S,t as m,k as M,v as b,p as j}from"./app-BlCBzDlk.js";import{_ as D}from"./AuthenticatedLayout-DQ_849qa.js";import{_ as G}from"./Card-O9o5eUXT.js";import{_ as x}from"./Button-CX2Fugjk.js";import{_ as g}from"./InputError-DW4bn3YL.js";import"./Footer-o2Y0PLgd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BzKXVlKb.js";const N={class:"py-12"},O={class:"max-w-3xl mx-auto sm:px-6 lg:px-8"},P=["value"],A={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T={key:0,class:"p-4 bg-gray-50 rounded-lg"},U={class:"flex items-center justify-between"},$={class:"text-xs text-gray-500 mt-1"},q={for:"comprobante",class:"block text-sm font-medium text-gray-700 mb-2"},z={class:"p-4 bg-blue-50 rounded-lg"},E={class:"text-sm text-gray-700"},L={class:"text-sm text-gray-700 mt-1"},H={class:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200"},I={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ee={__name:"Edit",props:{gasto:Object},setup(l){const n=l,o=V({categoria:n.gasto.categoria,descripcion:n.gasto.descripcion,monto:n.gasto.monto,fecha:n.gasto.fecha,comprobante:null}),w=["Transporte","Alimentación","Servicios Básicos","Mantenimiento","Publicidad","Suministros de Oficina","Salarios","Impuestos","Otros"],k=c=>{o.comprobante=c.target.files[0]},C=()=>{o.transform(c=>({...c,_method:"PUT"})).post(route("admin.gastos-operativos.update",n.gasto.id_gasto_operativo),{forceFormData:!0})},h=()=>{j.visit(route("admin.gastos-operativos.index"))},_=()=>{n.gasto.comprobante&&window.open(`/storage/${n.gasto.comprobante}`,"_blank")};return(c,t)=>(f(),u(v,null,[r(s(F),{title:"Editar Gasto Operativo"}),r(D,null,{header:d(()=>[...t[4]||(t[4]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Editar Gasto Operativo ",-1)])]),default:d(()=>[e("div",N,[e("div",O,[r(G,null,{default:d(()=>[e("form",{onSubmit:B(C,["prevent"]),class:"space-y-6"},[e("div",null,[t[6]||(t[6]=e("label",{for:"categoria",class:"block text-sm font-medium text-gray-700 mb-2"},[i(" Categoría "),e("span",{class:"text-red-500"},"*")],-1)),p(e("select",{id:"categoria","onUpdate:modelValue":t[0]||(t[0]=a=>s(o).categoria=a),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},[t[5]||(t[5]=e("option",{value:""},"Seleccione una categoría",-1)),(f(),u(v,null,S(w,a=>e("option",{key:a,value:a},m(a),9,P)),64))],512),[[M,s(o).categoria]]),r(g,{message:s(o).errors.categoria,class:"mt-2"},null,8,["message"])]),e("div",null,[t[7]||(t[7]=e("label",{for:"descripcion",class:"block text-sm font-medium text-gray-700 mb-2"},[i(" Descripción "),e("span",{class:"text-red-500"},"*")],-1)),p(e("textarea",{id:"descripcion","onUpdate:modelValue":t[1]||(t[1]=a=>s(o).descripcion=a),rows:"3",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[b,s(o).descripcion]]),r(g,{message:s(o).errors.descripcion,class:"mt-2"},null,8,["message"])]),e("div",A,[e("div",null,[t[8]||(t[8]=e("label",{for:"monto",class:"block text-sm font-medium text-gray-700 mb-2"},[i(" Monto (Bs) "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{id:"monto","onUpdate:modelValue":t[2]||(t[2]=a=>s(o).monto=a),type:"number",step:"0.01",min:"0",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[b,s(o).monto]]),r(g,{message:s(o).errors.monto,class:"mt-2"},null,8,["message"])]),e("div",null,[t[9]||(t[9]=e("label",{for:"fecha",class:"block text-sm font-medium text-gray-700 mb-2"},[i(" Fecha "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{id:"fecha","onUpdate:modelValue":t[3]||(t[3]=a=>s(o).fecha=a),type:"date",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[b,s(o).fecha]]),r(g,{message:s(o).errors.fecha,class:"mt-2"},null,8,["message"])])]),l.gasto.comprobante?(f(),u("div",T,[e("div",U,[e("div",null,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-700"},"Comprobante actual",-1)),e("p",$,m(l.gasto.comprobante.split("/").pop()),1)]),r(x,{type:"button",variant:"secondary",size:"sm",onClick:_},{default:d(()=>[...t[11]||(t[11]=[i(" Ver ",-1)])]),_:1})])])):y("",!0),e("div",null,[e("label",q,m(l.gasto.comprobante?"Cambiar Comprobante (opcional)":"Agregar Comprobante (opcional)"),1),e("input",{id:"comprobante",type:"file",accept:".jpg,.jpeg,.png,.pdf",onChange:k,class:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32),t[12]||(t[12]=e("p",{class:"mt-2 text-xs text-gray-500"}," Formatos permitidos: JPG, PNG, PDF. Tamaño máximo: 2MB ",-1)),r(g,{message:s(o).errors.comprobante,class:"mt-2"},null,8,["message"])]),e("div",z,[e("p",E,[t[13]||(t[13]=e("span",{class:"font-medium"},"Registrado por:",-1)),i(" "+m(l.gasto.registrador?.name||"N/A"),1)]),e("p",L,[t[14]||(t[14]=e("span",{class:"font-medium"},"Fecha de registro:",-1)),i(" "+m(new Date(l.gasto.created_at).toLocaleString("es-BO")),1)])]),e("div",H,[r(x,{type:"button",variant:"secondary",onClick:h,disabled:s(o).processing},{default:d(()=>[...t[15]||(t[15]=[i(" Cancelar ",-1)])]),_:1},8,["disabled"]),r(x,{type:"submit",variant:"primary",disabled:s(o).processing},{default:d(()=>[s(o).processing?(f(),u("svg",I,[...t[16]||(t[16]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):y("",!0),i(" "+m(s(o).processing?"Guardando...":"Actualizar Gasto"),1)]),_:1},8,["disabled"])])],32)]),_:1})])])]),_:1})],64))}};export{ee as default};
