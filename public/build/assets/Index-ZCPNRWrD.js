import{r as b,c as j,a as m,b as n,u as B,h as F,w as o,d as t,g,t as r,j as L,v as I,q as f,o as d,F as C,f as M,e as x,i as w,p as y}from"./app-BlCBzDlk.js";import{_ as V}from"./AuthenticatedLayout-DQ_849qa.js";import{_ as c}from"./Card-O9o5eUXT.js";import{_}from"./Button-CX2Fugjk.js";import{_ as O}from"./Badge-DUws-gGn.js";import"./Footer-o2Y0PLgd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BzKXVlKb.js";const $={class:"py-12"},R={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},S={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},z={class:"text-center"},G={class:"text-3xl font-bold text-gray-900"},q={class:"text-center"},H={class:"text-3xl font-bold text-gray-900"},U={class:"text-center"},J={class:"text-3xl font-bold text-green-600"},K={class:"text-center"},Q={class:"text-3xl font-bold text-orange-600"},W={class:"flex flex-col md:flex-row gap-4"},X={class:"flex-1"},Y={class:"flex gap-2"},Z={class:"overflow-x-auto"},tt={class:"min-w-full divide-y divide-gray-200"},et={class:"bg-white divide-y divide-gray-200"},st={class:"px-6 py-4 whitespace-nowrap"},at={class:"text-sm font-medium text-gray-900"},ot={class:"text-sm text-gray-500"},rt={class:"px-6 py-4"},nt={class:"text-sm text-gray-900"},it={class:"px-6 py-4 whitespace-nowrap"},lt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},dt={key:0,class:"text-xs text-gray-500"},ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ut={class:"px-6 py-4 whitespace-nowrap"},xt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},pt={class:"flex justify-end gap-2"},Ct={__name:"Index",props:{pagos:Object,stats:Object},setup(u){const D=u,i=b("TODOS"),p=b(""),v=j(()=>{let s=D.pagos.data;if(i.value!=="TODOS"&&(s=s.filter(e=>e.tipo_pago===i.value)),p.value){const e=p.value.toLowerCase();s=s.filter(a=>a.trabajo.titulo.toLowerCase().includes(e)||a.trabajo.cliente.nombre.toLowerCase().includes(e)||a.trabajo.cliente.email.toLowerCase().includes(e))}return s}),k=s=>({PENDIENTE:"warning",COMPLETADO:"success",PARCIAL:"info"})[s]||"default",T=s=>s?new Date(s).toLocaleDateString("es-BO",{year:"numeric",month:"short",day:"numeric"}):"-",h=s=>s.tipo_pago==="CONTADO"?s.pasarela?.estado||"PENDIENTE":s.cuotas.every(l=>l.estado==="PAGADA")?"COMPLETADO":s.cuotas.some(l=>l.estado==="PAGADA")?"PARCIAL":"PENDIENTE",A=s=>{y.visit(route("admin.clientes.pagos",s))},P=s=>{s.tipo_pago==="CREDITO"?y.visit(route("admin.cuotas.index",s.id_pago)):y.visit(route("admin.pagos.checkout",s.id_pago))},E=s=>{window.open(route("admin.pagos.descargar-comprobante",s.id_pago),"_blank")},N=s=>s.tipo_pago==="CONTADO"?s.pasarela?.estado==="COMPLETADO":!1;return(s,e)=>(d(),m(C,null,[n(B(F),{title:"Gestión de Pagos"}),n(V,null,{header:o(()=>[...e[4]||(e[4]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Gestión de Pagos ",-1)])]),default:o(()=>[t("div",$,[t("div",R,[t("div",S,[n(c,null,{default:o(()=>[t("div",z,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-500 mb-1"},"Total Pagos",-1)),t("p",G,r(u.stats.total_pagos),1)])]),_:1}),n(c,null,{default:o(()=>[t("div",q,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500 mb-1"},"Monto Total",-1)),t("p",H,"Bs "+r(parseFloat(u.stats.monto_total).toFixed(2)),1)])]),_:1}),n(c,null,{default:o(()=>[t("div",U,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 mb-1"},"Cobrado",-1)),t("p",J,"Bs "+r(parseFloat(u.stats.monto_pagado).toFixed(2)),1)])]),_:1}),n(c,null,{default:o(()=>[t("div",K,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500 mb-1"},"Por Cobrar",-1)),t("p",Q,"Bs "+r(parseFloat(u.stats.monto_pendiente).toFixed(2)),1)])]),_:1})]),n(c,null,{default:o(()=>[t("div",W,[t("div",X,[L(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),type:"text",placeholder:"Buscar por cliente, trabajo...",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[I,p.value]])]),t("div",Y,[t("button",{onClick:e[1]||(e[1]=a=>i.value="TODOS"),class:f(["px-4 py-2 text-sm rounded-lg transition-colors",i.value==="TODOS"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Todos ",2),t("button",{onClick:e[2]||(e[2]=a=>i.value="CONTADO"),class:f(["px-4 py-2 text-sm rounded-lg transition-colors",i.value==="CONTADO"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Contado ",2),t("button",{onClick:e[3]||(e[3]=a=>i.value="CREDITO"),class:f(["px-4 py-2 text-sm rounded-lg transition-colors",i.value==="CREDITO"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Crédito ",2)])])]),_:1}),v.value.length>0?(d(),g(c,{key:0},{default:o(()=>[t("div",Z,[t("table",tt,[e[12]||(e[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Cliente"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Trabajo"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tipo"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Monto"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Fecha"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Estado"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Acciones")])],-1)),t("tbody",et,[(d(!0),m(C,null,M(v.value,a=>(d(),m("tr",{key:a.id_pago,class:"hover:bg-gray-50"},[t("td",st,[t("div",at,r(a.trabajo.cliente.nombre),1),t("div",ot,r(a.trabajo.cliente.email),1)]),t("td",rt,[t("div",nt,r(a.trabajo.titulo),1)]),t("td",it,[n(O,{variant:a.tipo_pago==="CONTADO"?"default":"info"},{default:o(()=>[x(r(a.tipo_pago),1)]),_:2},1032,["variant"])]),t("td",lt,[x(" Bs "+r(parseFloat(a.monto).toFixed(2))+" ",1),a.tipo_pago==="CREDITO"?(d(),m("div",dt,r(a.cuotas.filter(l=>l.estado==="PAGADA").length)+"/"+r(a.numero_cuotas)+" cuotas ",1)):w("",!0)]),t("td",ct,r(T(a.fecha)),1),t("td",ut,[n(O,{variant:k(h(a))},{default:o(()=>[x(r(h(a)),1)]),_:2},1032,["variant"])]),t("td",xt,[t("div",pt,[N(a)?(d(),g(_,{key:0,variant:"success",size:"sm",onClick:l=>E(a),title:"Descargar comprobante"},{default:o(()=>[...e[9]||(e[9]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])]),_:1},8,["onClick"])):w("",!0),n(_,{variant:"secondary",size:"sm",onClick:l=>A(a.trabajo.id_cliente)},{default:o(()=>[...e[10]||(e[10]=[x(" Ver Cliente ",-1)])]),_:1},8,["onClick"]),n(_,{variant:"primary",size:"sm",onClick:l=>P(a)},{default:o(()=>[...e[11]||(e[11]=[x(" Detalle ",-1)])]),_:1},8,["onClick"])])])]))),128))])])])]),_:1})):(d(),g(c,{key:1},{default:o(()=>[...e[13]||(e[13]=[t("div",{class:"text-center py-12"},[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})]),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No hay pagos"),t("p",{class:"mt-1 text-sm text-gray-500"}," No se encontraron pagos con los filtros seleccionados. ")],-1)])]),_:1}))])])]),_:1})],64))}};export{Ct as default};
