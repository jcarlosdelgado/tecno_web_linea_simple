import{c as _,a as l,b as r,u as b,h as C,w as d,d as t,g as k,i as g,t as n,o as i,F as y,f,e as c,q as B,p as D}from"./app-BlCBzDlk.js";import{_ as S}from"./AuthenticatedLayout-DQ_849qa.js";import{_ as x}from"./Card-O9o5eUXT.js";import{C as T,a as V,L as $,B as F,p as M,c as L,d as N,f as P}from"./index-Cv8Ro1wv.js";import"./Footer-o2Y0PLgd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ResponsiveNavLink-BzKXVlKb.js";const j={class:"flex items-center justify-between"},z={class:"flex gap-3"},A=["href"],O=["href"],E={class:"py-12"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},U={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},q={class:"text-3xl font-bold text-gray-900 mt-2"},Q={class:"text-3xl font-bold text-gray-900 mt-2"},R={class:"text-3xl font-bold text-indigo-600 mt-2"},H={class:"h-96"},Z={class:"overflow-x-auto"},G={class:"min-w-full divide-y divide-gray-200"},J={class:"bg-white divide-y divide-gray-200"},K={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},W={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 text-center"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-medium"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-indigo-600 text-right font-semibold"},et={class:"bg-gray-50"},st={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right"},ot={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-indigo-600 text-right"},at={key:0,class:"text-center py-12 text-gray-500"},nt={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},it={class:"flex items-center justify-between"},lt={class:"flex-1 flex justify-between sm:hidden"},rt=["disabled"],dt=["disabled"],ut={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},mt={class:"text-sm text-gray-700"},ct={class:"font-medium"},xt={class:"font-medium"},pt={class:"font-medium"},gt={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},yt=["disabled"],bt=["onClick","disabled"],ft=["disabled"],St={__name:"Inventory",props:{consumption:Object,startDate:String,endDate:String},setup(s){T.register(V,$,F,M,L,N);const u=s,p=a=>new Intl.NumberFormat("es-BO",{style:"currency",currency:"BOB",minimumFractionDigits:2}).format(a),h=()=>{let a=route("admin.reportes.inventario.pdf");const e=new URLSearchParams;u.startDate&&e.append("start_date",u.startDate),u.endDate&&e.append("end_date",u.endDate);const o=e.toString();return o?`${a}?${o}`:a},v=_(()=>{const a=[...u.consumption.data].slice(0,10);return{labels:a.map(e=>e.name),datasets:[{label:"Cantidad Consumida",data:a.map(e=>e.total_consumed),backgroundColor:"#4F46E5"}]}}),w={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1},tooltip:{callbacks:{label:a=>`${a.parsed.x} unidades`}}},scales:{x:{beginAtZero:!0}}},m=a=>{a&&D.visit(a,{preserveScroll:!0,preserveState:!0})};return(a,e)=>(i(),l(y,null,[r(b(C),{title:"Consumo de Inventario"}),r(S,null,{header:d(()=>[t("div",j,[e[5]||(e[5]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Consumo de Inventario ",-1)),t("div",z,[t("a",{href:h(),target:"_blank",class:"inline-flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors"},[...e[4]||(e[4]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),c(" Exportar PDF ",-1)])],8,A),t("a",{href:a.route("admin.reportes.dashboard"),class:"text-sm text-indigo-600 hover:text-indigo-800"}," ← Volver al Dashboard ",8,O)])])]),default:d(()=>[t("div",E,[t("div",I,[t("div",U,[r(x,null,{default:d(()=>[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Materiales Diferentes",-1)),t("p",q,n(s.consumption.total),1)]),_:1}),r(x,null,{default:d(()=>[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-600"},"Cantidad Total Consumida",-1)),t("p",Q,n((s.consumption.globalTotalQuantity||0).toFixed(2)),1)]),_:1}),r(x,null,{default:d(()=>[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-600"},"Valor Total",-1)),t("p",R,n(p(s.consumption.globalTotalValue||0)),1)]),_:1})]),s.consumption.total>0?(i(),k(x,{key:0,title:"Top 10 Materiales Más Consumidos"},{default:d(()=>[t("div",H,[r(b(P),{data:v.value,options:w},null,8,["data"])])]),_:1})):g("",!0),r(x,{title:"Detalle de Consumo"},{default:d(()=>[t("div",Z,[t("table",G,[e[10]||(e[10]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Material "),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Unidad "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Precio Unitario "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Cantidad Consumida "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Valor Total ")])],-1)),t("tbody",J,[(i(!0),l(y,null,f(s.consumption.data,o=>(i(),l("tr",{key:o.material_id,class:"hover:bg-gray-50"},[t("td",K,n(o.name),1),t("td",W,n(o.unit),1),t("td",X,n(p(o.unit_price)),1),t("td",Y,n(o.total_consumed.toFixed(2)),1),t("td",tt,n(p(o.total_value)),1)]))),128))]),t("tfoot",et,[t("tr",null,[e[9]||(e[9]=t("td",{colspan:"3",class:"px-6 py-4 text-sm font-bold text-gray-900 text-right"}," TOTAL: ",-1)),t("td",st,n((s.consumption.globalTotalQuantity||0).toFixed(2)),1),t("td",ot,n(p(s.consumption.globalTotalValue||0)),1)])])]),s.consumption.total===0?(i(),l("div",at," No hay datos de consumo para el período seleccionado ")):g("",!0)]),s.consumption.last_page>1?(i(),l("div",nt,[t("div",it,[t("div",lt,[t("button",{onClick:e[0]||(e[0]=o=>m(s.consumption.prev_page_url)),disabled:!s.consumption.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Anterior ",8,rt),t("button",{onClick:e[1]||(e[1]=o=>m(s.consumption.next_page_url)),disabled:!s.consumption.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Siguiente ",8,dt)]),t("div",ut,[t("div",null,[t("p",mt,[e[11]||(e[11]=c(" Mostrando ",-1)),t("span",ct,n(s.consumption.from),1),e[12]||(e[12]=c(" a ",-1)),t("span",xt,n(s.consumption.to),1),e[13]||(e[13]=c(" de ",-1)),t("span",pt,n(s.consumption.total),1),e[14]||(e[14]=c(" resultados ",-1))])]),t("div",null,[t("nav",gt,[t("button",{onClick:e[2]||(e[2]=o=>m(s.consumption.prev_page_url)),disabled:!s.consumption.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...e[15]||(e[15]=[t("span",{class:"sr-only"},"Anterior",-1),t("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])],8,yt),(i(!0),l(y,null,f(s.consumption.links,o=>(i(),l(y,{key:o.label},[!o.label.includes("Previous")&&!o.label.includes("Next")?(i(),l("button",{key:0,onClick:ht=>m(o.url),disabled:o.active||!o.url,class:B([o.active?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},n(o.label),11,bt)):g("",!0)],64))),128)),t("button",{onClick:e[3]||(e[3]=o=>m(s.consumption.next_page_url)),disabled:!s.consumption.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...e[16]||(e[16]=[t("span",{class:"sr-only"},"Siguiente",-1),t("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])],8,ft)])])])])])):g("",!0)]),_:1})])])]),_:1})],64))}};export{St as default};
